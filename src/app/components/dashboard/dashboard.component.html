<div class="dashboard-container">
  <!-- KPI CARDS -->
  <div class="kpi-grid">
    <mat-card class="kpi-card">
      <h3>Total Sales</h3>
      <h1>$ 1,250,000</h1>
    </mat-card>

    <mat-card class="kpi-card">
      <h3>Total Customers</h3>
      <h1>1,240</h1>
    </mat-card>

    <mat-card class="kpi-card">
      <h3>Total Products</h3>
      <h1>320</h1>
    </mat-card>
  </div>

  <!-- CHART SECTION -->
  <!-- ============================= -->
  <!-- =============================== -->
<!-- SALES BY VENDOR (INTERACTIVE) -->
<!-- =============================== -->

<mat-card class="chart-card">

  <h2>Sales By Vendor</h2>

  <!-- ================= FILTERS ================= -->

  <div class="filters">

    <!-- TOP INPUT -->
    <label>Top:</label>
    <input
      type="number"
      [(ngModel)]="topVendor"
      (change)="onVendorFilterChange()"
      min="1"
    />

    <!-- CATEGORY DROPDOWN -->
    <label>Category:</label>
    <select
      [(ngModel)]="categoryVendor"
      (change)="onVendorFilterChange()">

      <option *ngFor="let c of categories" [value]="c">
        {{ c }}
      </option>

    </select>

    <!-- SORT -->
    <label>Sort:</label>
    <select
      [(ngModel)]="sortVendor"
      (change)="onVendorFilterChange()">

      <option value="desc">Desc</option>
      <option value="asc">Asc</option>

    </select>

  </div>

  <!-- ================= CHART ================= -->

  <canvas
    baseChart
    [data]="vendorChartData"
    [options]="vendorChartOptions"
    [type]="'bar'">
  </canvas>

</mat-card>

  <!-- ============================= -->
  <!-- TOP PRODUCTS -->
  <!-- ============================= -->

  <mat-card class="table-card">
    <h2>Top Products (Sales)</h2>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Product</th>
            <th>Category</th>
            <th>Total Sales</th>
            <th>Total Qty</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let p of topProducts">
            <td>{{ p.productName }}</td>
            <td>{{ p.category }}</td>

            <!-- âœ… Use totalSalesAmount -->
            <td>{{ p.totalSalesAmount | currency: "USD" }}</td>

            <td>{{ p.totalQty }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-card>
</div>
